!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("dayjs")):"function"==typeof define&&define.amd?define(["react","dayjs"],t):"object"==typeof exports?exports["play-time-bar"]=t(require("react"),require("dayjs")):e["play-time-bar"]=t(e.react,e.dayjs)}(this,((e,t)=>(()=>{"use strict";var r={185:e=>{e.exports=t},155:t=>{t.exports=e}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return r[e](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{n.d(i,{default:()=>c});var e=n(155),t=n.n(e),r=n(185),o=n.n(r);const l={startTime:o()(o()().format("YYYY-MM-DD HH:00:00")).subtract(1,"hour"),endTime:o()(o()().format("YYYY-MM-DD HH:00:00")).add(1,"hour")},u="#303030",d={topLine:{topColor:"#FFFF00",lineWidth:1,x:0,y:45},bottomLine:{bottomColor:"#FFFF00",lineWidth:1,x:0,y:54},middleLine:{middleColor:u,lineWidth:8,x:0,y:49.5},recordBar:{recordColor:"#637DEC",lineWidth:8,x:0,y:45.5},lineText:{fontSize:12,color:"#fff",y:43}},c=r=>{const{nowTime:n=o()().format("YYYY-MM-DD HH:mm:ss"),timeDataList:i=[l],onMouseMove:c,onMouseLeave:s,onMouseDown:a,onMouseUp:f,onMouseEnter:m,isZoom:h=!0,zoomProps:v={zoomInMultiplier:1.5,zoomOutMultiplier:1.5},maxSize:x=400,minSize:p=100,intervalSize:y=200,lineSetting:g=Object.assign({},d)}=r,b=(0,e.useRef)(),w=(0,e.useRef)(),T=n,L=t().useRef({status:!1}),Y=t().useRef(y),M=t().useRef(3600/Y.current),C=t().useCallback(((e,t,r,n)=>{const i=t.valueOf(),l=o()(t.format("YYYY-MM-DD HH:00:00")).valueOf(),u=r/2-(i-l)/1e3/M.current-1,d=Math.floor(u/Y.current),c=Math.floor((r-u)/Y.current),s=Array.from({length:d+1},((e,t)=>{var r,n;const l=o()(i).subtract(t,"hour").format("HH:00");return{x:u-t*Y.current,y:null!==(n=null===(r=null==g?void 0:g.lineText)||void 0===r?void 0:r.y)&&void 0!==n?n:43,text:l}})),a=Array.from({length:c+1},((e,t)=>{var r;const n=o()(i).add(t,"hour").format("HH:00");return{x:u+t*Y.current,y:null===(r=null==g?void 0:g.lineText)||void 0===r?void 0:r.y,text:n}}));s.forEach((t=>{var r,o,i;null==e||e.beginPath(),e.strokeStyle="#4B4B4B",e.lineWidth=2,null==e||e.moveTo(t.x,t.y),null==e||e.lineTo(t.x,n),null==e||e.stroke(),e.font=`${null===(r=null==g?void 0:g.lineText)||void 0===r?void 0:r.fontSize} serif`,e.fillStyle=null!==(i=null===(o=null==g?void 0:g.lineText)||void 0===o?void 0:o.color)&&void 0!==i?i:"",e.textAlign="start",e.fillText(t.text,t.x-14,t.y-6)})),a.forEach((t=>{var r,o,i,l;null==e||e.beginPath(),e.strokeStyle="#4B4B4B",e.lineWidth=2,t.y&&(null==e||e.moveTo(t.x,t.y)),null==e||e.lineTo(t.x,n),null==e||e.stroke(),e.font=`${null!==(o=null===(r=null==g?void 0:g.lineText)||void 0===r?void 0:r.fontSize)&&void 0!==o?o:"12px"} serif`,e.fillStyle=null!==(l=null===(i=null==g?void 0:g.lineText)||void 0===i?void 0:i.color)&&void 0!==l?l:"",e.textAlign="start",t.y&&e.fillText(t.text,t.x-14,t.y-6)}))}),[]),k=t().useCallback(((e,t,r,o,n)=>{const i=o.valueOf(),l=i/1e3-t/2*M.current,u=i/1e3+t/2*M.current;n.filter((e=>{const t=e.startTime.valueOf()/1e3,r=e.endTime.valueOf()/1e3;return t<l&&r>l||t>=l&&t<u})).map((r=>{var o,n,i,d,c,s;const a=r.startTime.valueOf()/1e3,f=r.endTime.valueOf()/1e3;if(a<l){const r=f<u?(f-l)/M.current:t;e.beginPath(),e.fillStyle=null===(o=g.recordBar)||void 0===o?void 0:o.recordColor,e.fillRect(0,null===(n=g.recordBar)||void 0===n?void 0:n.y,r,null===(i=g.recordBar)||void 0===i?void 0:i.lineWidth)}if(a>=l){const t=(a-l)/M.current,r=(f-a)/M.current;e.beginPath(),e.fillStyle=null===(d=g.recordBar)||void 0===d?void 0:d.recordColor,e.fillRect(t,null===(c=g.recordBar)||void 0===c?void 0:c.y,r,null===(s=g.recordBar)||void 0===s?void 0:s.lineWidth)}return!0}))}),[]),H=(e,t,r)=>{e&&(e.font="16px serif",e.fillStyle="white",e.textAlign="center",e.fillText(t,r/2-10,20))},W=t().useCallback(((e,t,r,n)=>{var i,l,c,s,a,f;e.beginPath(),e.strokeStyle=null!==(i=g.middleLine.middleColor)&&void 0!==i?i:u,e.lineWidth=null!==(l=g.middleLine.lineWidth)&&void 0!==l?l:d.middleLine.lineWidth;const m=g.middleLine.y;e.moveTo(0,m),e.lineTo(t,m),e.stroke(),C(e,o()(T),t,r),k(e,t,r,o()(T),n),e.beginPath();const h=g.bottomLine.y;e.strokeStyle=null!==(c=g.bottomLine.bottomColor)&&void 0!==c?c:d.bottomLine.bottomColor,e.lineWidth=null!==(s=g.bottomLine.lineWidth)&&void 0!==s?s:d.bottomLine.lineWidth,e.moveTo(0,h),e.lineTo(t,h),e.stroke(),e.beginPath(),e.strokeStyle=null!==(a=g.topLine.topColor)&&void 0!==a?a:d.topLine.topColor;const v=g.topLine.y;e.lineWidth=null!==(f=g.topLine.lineWidth)&&void 0!==f?f:d.topLine.lineWidth,e.moveTo(0,v),e.lineTo(t,v),e.stroke(),e.beginPath(),e.strokeStyle="#ffcc00",e.lineWidth=2,e.moveTo(t/2-1+.5,0),e.lineTo(t/2-1+.5,r),e.stroke()}),[g.bottomLine.bottomColor,g.bottomLine.lineWidth,g.bottomLine.y,g.middleLine.lineWidth,g.middleLine.middleColor,g.middleLine.y,g.topLine.lineWidth,g.topLine.topColor,g.topLine.y,T,k,C]),S=t().useCallback(((e,t,r)=>{e.width;let n=T;e.onmouseenter=e=>{null==m||m(n,L.current.status)},e.onmousemove=n=>{if(L.current.status)return;t.clearRect(0,0,e.width,e.height),W(t,e.width,e.height,r);const i=e.width;t.beginPath(),t.font="12px serif",t.fillStyle="#969696";const l=i/2-n.offsetX,u=Math.abs(l)*M.current;l>0?t.fillText(o()(T).subtract(u,"s").format("HH:mm:ss"),n.offsetX,10):l<0&&t.fillText(o()(T).add(u,"s").format("HH:mm:ss"),n.offsetX,10),H(t,T,e.width)},document.onmousemove=i=>{if(L.current.status){if(t.clearRect(0,0,e.width,e.height),W(t,e.width,e.height,r),!L.current.mousedownX)return;const l=L.current.mousedownX-i.clientX,u=Math.abs(l)*M.current;l>0?n=o()(L.current.enterTime).add(u,"s").format("YYYY-MM-DD HH:mm:ss"):l<=0&&(n=o()(L.current.enterTime).subtract(u,"s").format("YYYY-MM-DD HH:mm:ss")),H(t,n,e.width),null==c||c(n,L.current.status)}},e.onmouseleave=o=>{L.current.status||(t.clearRect(0,0,e.width,e.height),W(t,e.width,e.height,r),H(t,T,e.width),L.current.status=!1,L.current.mousedownX=void 0,L.current.mousedownY=void 0,L.current.enterTime=void 0),null==s||s(n,L.current.status)},document.onmouseup=()=>{null==f||f(n,L.current.status),L.current.status=!1,L.current.mousedownX=void 0,L.current.mousedownY=void 0,L.current.enterTime=void 0},e.onmouseup=e=>{},e.onmousedown=o=>{L.current.status=!0,t.clearRect(0,0,e.width,e.height),W(t,e.width,e.height,r),H(t,T,e.width),L.current.mousedownX=o.clientX,L.current.mousedownY=o.clientY,L.current.enterTime=T,null==a||a(n,L.current.status)}}),[T,W,a,m,s,c,f]),D=t().useCallback(((e,t)=>{if(!w.current||!b.current)return;const r=b.current.offsetWidth,o=b.current.offsetHeight;w.current.width=r,w.current.height=o;const n=w.current.getContext("2d");n&&(n.clearRect(0,0,r,o),W(n,r,o,t),H(n,e,r),S(w.current,n,t))}),[S,W]);return(0,e.useEffect)((()=>{D(n,i)}),[D,i,n]),t().createElement(t().Fragment,null,t().createElement("div",{id:"timeProgressBox",ref:b,style:{margin:"20px",background:"black",width:"90%",height:"65px",position:"relative"}},h?t().createElement("div",{style:{position:"absolute",top:"2px",right:"5px",zIndex:10,width:"40px",display:"flex",justifyContent:"space-evenly"}},t().createElement("div",{style:{cursor:"pointer",background:"#ffffffd1",width:"14px",height:"14px",lineHeight:"10px",textAlign:"center"},onClick:()=>{var e,t;if(!(Y.current>=x)&&(null===(e=v.onZoomIn)||void 0===e||e.call(v,T),Y.current=Y.current*(null!==(t=v.zoomInMultiplier)&&void 0!==t?t:1.5),M.current=3600/Y.current,w.current)){const e=w.current.getContext("2d");if(!e)return;e.clearRect(0,0,w.current.width,w.current.height),W(e,w.current.width,w.current.height,i),H(e,T,w.current.width)}}},"+"),t().createElement("div",{style:{cursor:"pointer",background:"#ffffffd1",width:"14px",height:"14px",lineHeight:"10px",textAlign:"center"},onClick:()=>{var e,t;if(!(Y.current<=p)&&(null===(e=v.onZoomOut)||void 0===e||e.call(v,T),Y.current=Y.current/(null!==(t=v.zoomOutMultiplier)&&void 0!==t?t:1.5),M.current=3600/Y.current,w.current)){const e=w.current.getContext("2d");if(!e)return;e.clearRect(0,0,w.current.width,w.current.height),W(e,w.current.width,w.current.height,i),H(e,T,w.current.width)}}},"-")):null,t().createElement("canvas",{id:"timeProgress",ref:w})))}})(),i.default})()));